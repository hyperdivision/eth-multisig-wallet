dist: xenial
language: node_js
node_js:
  - lts/*


jobs:
  include:
    - stage: test
      script:
        - npm run pretest
    - stage: slither
      addons:
        apt:
          sources:
            - deadsnakes
          packages:
            - python3.8
            - python3.8-distutils
            - python3.8-dev
      before_install:
        - curl https://bootstrap.pypa.io/get-pip.py -o- | sudo python3.8
        - sudo pip3 install slither-analyzer

      script:
        - slither . || true
